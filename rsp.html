<!DOCTYPE html>
<html lang="bg">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>–ö–∞–º—ä–∫-–Ω–æ–∂–∏—Ü–∞-—Ö–∞—Ä—Ç–∏—è —Å —Ä–∞–∑—à–∏—Ä–µ–Ω–∏ –∞–Ω–∏–º–∞—Ü–∏–∏</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f0f4f8;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100vh;
        margin: 0;
        padding: 20px;
        transition: background-color 0.7s ease;
    }
    h1 {
        color: #333;
    }
    .choices {
        margin: 20px 0;
    }
    button {
        font-size: 18px;
        padding: 10px 20px;
        margin: 0 10px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        background: #4a90e2;
        color: white;
        transition: background 0.3s ease, transform 0.3s ease;
    }
    button:hover {
        background: #357ABD;
    }
    button.pulse {
        animation: pulse 0.4s ease;
    }
    @keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.15); }
        100% { transform: scale(1); }
    }
    .result {
        margin-top: 30px;
        font-size: 20px;
        min-height: 80px;
        color: #555;
        text-align: center;
        opacity: 0;
        transform: translateY(20px);
        transition: opacity 0.5s ease, transform 0.5s ease;
    }
    .result.visible {
        opacity: 1;
        transform: translateY(0);
    }
    .stats {
        margin-top: 20px;
        font-size: 18px;
        color: #333;
        text-align: center;
    }
    .reset-btn {
        margin-top: 25px;
        background: #e94e77;
    }
    .reset-btn:hover {
        background: #d0365a;
    }
</style>
</head>
<body>
<h1>–ò–≥—Ä–∞: –ö–∞–º—ä–∫ - –ù–æ–∂–∏—Ü–∞ - –•–∞—Ä—Ç–∏—è</h1>
<div class="choices">
    <button onclick="play('–∫–∞–º—ä–∫', this)">–ö–∞–º—ä–∫ ü™®</button>
    <button onclick="play('–Ω–æ–∂–∏—Ü–∞', this)">–ù–æ–∂–∏—Ü–∞ ‚úÇÔ∏è</button>
    <button onclick="play('—Ö–∞—Ä—Ç–∏—è', this)">–•–∞—Ä—Ç–∏—è üìÑ</button>
</div>
<div class="result" id="result"></div>
<div class="stats" id="stats">
    –¢–≤–æ–π—Ç–µ –ø–æ–±–µ–¥–∏: 0<br>
    –ü–æ–±–µ–¥–∏ –Ω–∞ –∫–æ–º–ø—é—Ç—ä—Ä–∞: 0<br>
    –†—É–Ω–¥–æ–≤–µ –∏–∑–∏–≥—Ä–∞–Ω–∏: 0
</div>
<button class="reset-btn" onclick="resetGame()">–ù–æ–≤–∞ –∏–≥—Ä–∞</button>

<script>
    let userWins = 0;
    let computerWins = 0;
    let rounds = 0;
    const maxWins = 4;

    // –ó–∞—Ä–µ–∂–¥–∞–Ω–µ –Ω–∞ –∑–≤—É—Ü–∏ (–æ—Ç–≤–æ—Ä–µ–Ω–∏ —Ä–µ—Å—É—Ä—Å–∏)
    const soundClick = new Audio('https://actions.google.com/sounds/v1/buttons/button_press.mp3');
    const soundWin = new Audio('https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg');
    const soundLose = new Audio('https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg');
    const soundDraw = new Audio('https://actions.google.com/sounds/v1/cartoon/boing.ogg');

    function play(userChoice, buttonElem) {
        if (userWins >= maxWins || computerWins >= maxWins) {
            return; // –∏–≥—Ä–∞—Ç–∞ –µ –ø—Ä–∏–∫–ª—é—á–∏–ª–∞
        }

        // –ó–≤—É–∫ –ø—Ä–∏ –∫–ª–∏–∫
        soundClick.currentTime = 0;
        soundClick.play();

        // –ê–Ω–∏–º–∞—Ü–∏—è –Ω–∞ –±—É—Ç–æ–Ω–∞ - –ø—É–ª—Å–∏—Ä–∞–Ω–µ
        buttonElem.classList.add('pulse');
        setTimeout(() => {
            buttonElem.classList.remove('pulse');
        }, 400);

        const choices = ['–∫–∞–º—ä–∫', '–Ω–æ–∂–∏—Ü–∞', '—Ö–∞—Ä—Ç–∏—è'];
        const computerChoice = choices[Math.floor(Math.random() * choices.length)];

        let resultText = `–¢–∏ –∏–∑–±—Ä–∞: ${userChoice}. –ö–æ–º–ø—é—Ç—ä—Ä—ä—Ç –∏–∑–±—Ä–∞: ${computerChoice}. `;

        // –¶–≤–µ—Ç–æ–≤–∏ –µ—Ñ–µ–∫—Ç–∏
        const body = document.body;

        if (userChoice === computerChoice) {
            resultText += "–†–∞–≤–µ–Ω—Å—Ç–≤–æ! ü§ù";
            soundDraw.play();
            body.style.backgroundColor = '#fff3cd'; // –∂—ä–ª—Ç–æ
        } else if (
            (userChoice === '–∫–∞–º—ä–∫' && computerChoice === '–Ω–æ–∂–∏—Ü–∞') ||
            (userChoice === '–Ω–æ–∂–∏—Ü–∞' && computerChoice === '—Ö–∞—Ä—Ç–∏—è') ||
            (userChoice === '—Ö–∞—Ä—Ç–∏—è' && computerChoice === '–∫–∞–º—ä–∫')
        ) {
            userWins++;
            resultText += "–¢–∏ –ø–µ—á–µ–ª–∏—à —Ç–æ–∑–∏ —Ä—É–Ω–¥! üéâ";
            soundWin.play();
            body.style.backgroundColor = '#d4edda'; // –∑–µ–ª–µ–Ω–æ
        } else {
            computerWins++;
            resultText += "–ö–æ–º–ø—é—Ç—ä—Ä—ä—Ç –ø–µ—á–µ–ª–∏ —Ç–æ–∑–∏ —Ä—É–Ω–¥! üíª";
            soundLose.play();
            body.style.backgroundColor = '#f8d7da'; // —á–µ—Ä–≤–µ–Ω–æ
        }

        rounds++;

        // –û–±–Ω–æ–≤—è–≤–∞–Ω–µ –Ω–∞ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏—Ç–µ
        const resultDiv = document.getElementById('result');
        resultDiv.innerText = resultText;

        // –ü–æ–∫–∞–∑–≤–∞–º–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∞ —Å –∞–Ω–∏–º–∞—Ü–∏—è
        resultDiv.classList.remove('visible');
        void resultDiv.offsetWidth; // trigger reflow
        resultDiv.classList.add('visible');

        document.getElementById('stats').innerHTML =
            `–¢–≤–æ–π—Ç–µ –ø–æ–±–µ–¥–∏: ${userWins}<br>` +
            `–ü–æ–±–µ–¥–∏ –Ω–∞ –∫–æ–º–ø—é—Ç—ä—Ä–∞: ${computerWins}<br>` +
            `–†—É–Ω–¥–æ–≤–µ –∏–∑–∏–≥—Ä–∞–Ω–∏: ${rounds}`;

        // –í—Ä—ä—â–∞–º–µ —Ñ–æ–Ω –∫—ä–º –Ω–æ—Ä–º–∞–ª–µ–Ω —Å–ª–µ–¥ 2.5 —Å–µ–∫—É–Ω–¥–∏
        setTimeout(() => {
            body.style.backgroundColor = '#f0f4f8';
        }, 2500);

        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞ –∫—Ä–∞–π –Ω–∞ –º–∞—á–∞
        if (userWins === maxWins) {
            resultDiv.innerText += "\nüéâ –ü–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏—è! –¢–∏ —Å–ø–µ—á–µ–ª–∏ –º–∞—á–∞! üèÜ";
        } else if (computerWins === maxWins) {
            resultDiv.innerText += "\nüíª –ö–æ–º–ø—é—Ç—ä—Ä—ä—Ç —Å–ø–µ—á–µ–ª–∏ –º–∞—á–∞! –û–ø–∏—Ç–∞–π –ø–∞–∫!";
        }
    }

    function resetGame() {
        userWins = 0;
        computerWins = 0;
        rounds = 0;
        const resultDiv = document.getElementById('result');
        resultDiv.innerText = "";
        resultDiv.classList.remove('visible');
        document.getElementById('stats').innerHTML =
            `–¢–≤–æ–π—Ç–µ –ø–æ–±–µ–¥–∏: 0<br>` +
            `–ü–æ–±–µ–¥–∏ –Ω–∞ –∫–æ–º–ø—é—Ç—ä—Ä–∞: 0<br>` +
            `–†—É–Ω–¥–æ–≤–µ –∏–∑–∏–≥—Ä–∞–Ω–∏: 0`;
        document.body.style.backgroundColor = '#f0f4f8';
    }
</script>
</body>
</html>

